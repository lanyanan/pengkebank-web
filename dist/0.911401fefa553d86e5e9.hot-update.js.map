{"version":3,"sources":["webpack:///./src/js/components/colorPicker.js"],"names":["ColorPicker","wh","document","body","clientWidth","state","x","y","r","g","b","a","c","ReactDOM","findDOMNode","refs","canvas","cxt","getContext","img","Image","src","onload","drawImage","e","offset","getOffset","console","log","targetTouches","pageX","pageY","R1","parseInt","R2","Math","pow","rgba","getImageData","data","setState","preventDefault","props","close","cancle","cb","dom","xy","className","tagName","offsetLeft","offsetTop","parentNode","scrollTop","stopPropagation","display","show","cancelPicker","bind","stopBodyScroll","closePicker","color","fontSize","width","height","marginLeft","selectColor","submitColor","top","left","backgroundColor","require"],"mappings":"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","file":"0.911401fefa553d86e5e9.hot-update.js","sourcesContent":["/**\r\n * 颜色拾取组件\r\n * @prop {boolean}  show    是否显示\r\n * @prop {function} close   关闭按钮回调函数\r\n * @prop {function} cb      选择完成时的回调函数\r\n */\r\nimport {Base64Img} from './Base64img';\r\nimport React, { Component } from 'react';\r\n\r\nexport class ColorPicker extends Component{\r\n    constructor() {\r\n        super();\r\n        this.wh = document.body.clientWidth * 0.6;\r\n        this.state = {\r\n            x: this.wh / 4 - 10,\r\n            y: this.wh / 4 - 10,\r\n            r: 94,\r\n            g: 245,\r\n            b: 132,\r\n            a: 1\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        let c = ReactDOM.findDOMNode(this.refs.canvas);\r\n        let cxt=c.getContext('2d');\r\n        let img=new Image();\r\n        img.src=Base64Img;\r\n        img.onload = ()=>{\r\n            cxt.drawImage(img, 0, 0, this.wh, this.wh);\r\n        };\r\n        \r\n    }\r\n    selectColor(e) {\r\n        let c = ReactDOM.findDOMNode(this.refs.canvas);\r\n        let cxt=c.getContext('2d');\r\n        let offset = this.getOffset(c);\r\n        console.log(offset)\r\n        let x = e.targetTouches[0].pageX - offset.x;\r\n        let y = e.targetTouches[0].pageY - offset.y;\r\n        let R1 = parseInt(c.clientWidth/2);\r\n        let R2 = parseInt(c.clientWidth/4);\r\n        //圆心为 R1,R1;\r\n        if(x<R1&&y<=R1){\r\n            if((Math.pow((R1-x),2) + Math.pow((R1-y),2) < Math.pow(R1,2))&& Math.pow((R1-x),2) + Math.pow((R1-y),2) > Math.pow(R2,2)){\r\n                let rgba = cxt.getImageData(x, y, 1, 1).data;\r\n                console.log(rgba)\r\n                this.setState({\r\n                    x: x,\r\n                    y: y,\r\n                    r: rgba[0],\r\n                    g: rgba[1],\r\n                    b: rgba[2],\r\n                    a: rgba[3] / 255\r\n                });\r\n            }\r\n        }else if(x>=R1&&y<=R1) {\r\n            if((Math.pow((x-R1),2) + Math.pow((R1-y),2) < Math.pow(R1,2))&& Math.pow((x-R1),2) + Math.pow((R1-y),2) > Math.pow(R2,2)){\r\n                let rgba = cxt.getImageData(x, y, 1, 1).data;\r\n                console.log(rgba)\r\n                this.setState({\r\n                    x: x,\r\n                    y: y,\r\n                    r: rgba[0],\r\n                    g: rgba[1],\r\n                    b: rgba[2],\r\n                    a: rgba[3] / 255\r\n                });\r\n            }\r\n        }else if(x>=R1&&y>R1) {\r\n            if((Math.pow((x-R1),2) + Math.pow((y-R1),2) < Math.pow(R1,2))&& Math.pow((x-R1),2) + Math.pow((y-R1),2) > Math.pow(R2,2)){\r\n                let rgba = cxt.getImageData(x, y, 1, 1).data;\r\n                console.log(rgba)\r\n                this.setState({\r\n                    x: x,\r\n                    y: y,\r\n                    r: rgba[0],\r\n                    g: rgba[1],\r\n                    b: rgba[2],\r\n                    a: rgba[3] / 255\r\n                });\r\n            }\r\n        }else if(x<R1&&y>=R1) {\r\n            if((Math.pow((R1-x),2) + Math.pow((y-R1),2) < Math.pow(R1,2))&& Math.pow((R1-x),2) + Math.pow((y-R1),2) > Math.pow(R2,2)){\r\n                let rgba = cxt.getImageData(x, y, 1, 1).data;\r\n                console.log(rgba)\r\n                this.setState({\r\n                    x: x,\r\n                    y: y,\r\n                    r: rgba[0],\r\n                    g: rgba[1],\r\n                    b: rgba[2],\r\n                    a: rgba[3] / 255\r\n                });\r\n            }\r\n        }\r\n        \r\n    }\r\n    closePicker(e) {\r\n        e.preventDefault();\r\n        if (typeof this.props.close==='function') {\r\n            this.props.close({\r\n                r: this.state.r,\r\n                g: this.state.g,\r\n                b: this.state.b,\r\n                a: this.state.a\r\n            });\r\n        }\r\n        if (typeof this.props.cancle==='function') {\r\n            this.props.cancle();\r\n        }\r\n    }\r\n    cancelPicker(e) {\r\n        e.preventDefault();\r\n        if (typeof this.props.cancle==='function') {\r\n            this.props.cancle();\r\n        }\r\n    }\r\n    submitColor(e) {\r\n        if (typeof this.props.cb==='function') {\r\n            this.props.cb({\r\n                r: this.state.r,\r\n                g: this.state.g,\r\n                b: this.state.b,\r\n                a: this.state.a\r\n            });\r\n        }\r\n    }\r\n    getOffset(dom) {\r\n        let xy = {x:0, y:0};\r\n        while (dom.className!='colorpicker' && dom.tagName!='BODY' && dom.tagName!='HTML') {\r\n            xy.x += dom.offsetLeft;\r\n            xy.y += dom.offsetTop;\r\n            dom = dom.parentNode;\r\n        }\r\n        // xy.y += dom.offsetTop;\r\n        xy.y += document.body.scrollTop;\r\n        return xy;\r\n    }\r\n    // 阻止页面滚动\r\n    stopBodyScroll(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n    render() {\r\n        let rgba = `rgba(${this.state.r}, ${this.state.g}, ${this.state.b}, ${this.state.a})`;\r\n        return (\r\n            <section className=\"colorpicker\" style={{display:this.props.show?'block':'none'}} onTouchStart={this.cancelPicker.bind(this)}>\r\n                <div className=\"cp-wrap\" onTouchStart={this.stopBodyScroll}>\r\n                    <div className=\"cp-hd\">\r\n                        <div className=\"cp-preview\" onTouchStart={this.cancelPicker.bind(this)}>取消</div>\r\n                        <b onTouchStart={this.closePicker.bind(this)} style={{color:\"#1bb1e4\",fontSize:\"16px\"}}>确定</b>\r\n                    </div>\r\n                    <div ref=\"wrap\" className=\"canvas-wrap\" style={{width:this.wh,height:this.wh,marginLeft:((-this.wh/2)+\"px\")}} onTouchMove={this.selectColor.bind(this)}\r\n                        onTouchStart={this.selectColor.bind(this)} onTouchEnd={this.submitColor.bind(this)}>\r\n                        <canvas ref=\"canvas\" width={this.wh} height={this.wh}></canvas>\r\n                        <i style={{top:this.state.y-10, left:this.state.x-10}}></i>\r\n                        <div className=\"cp-lamp\" style={{backgroundColor:rgba}}>\r\n                            <img src={require(\"../../img/color.png\")}/>\r\n                            <img src={require(\"../../img/color.png\")}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        );\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/colorPicker.js"],"sourceRoot":""}